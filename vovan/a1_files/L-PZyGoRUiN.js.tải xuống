if (self.CavalryLogger) { CavalryLogger.start_js(["TNRnJ"]); }

__d("MPresenceIcon",["DOM","MLegacyDataStore","MRequest","MURI","Stratcom","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){var g=1,h=2,i;function j(){var a=b("DOM").scry(document.body,"i","presence-icon"),c=[];for(var d=0,e=a.length;d<e;++d){var f=b("MLegacyDataStore").get(a[d]);f.userid&&!c[f.userid]&&(c[f.userid]=1)}f=new(b("MURI"))("/chat/presence_icon.php").toString();d=new(b("MRequest"))(f).setData({ids:Object.keys(c)}).setIgnoreErrors(!0);d.listen("done",function(e){for(var c=0,d=a.length;c<d;++c){var f=b("MLegacyDataStore").get(a[c]);f&&f.userid&&b("Stratcom").hasSigil(a[c],"online-icon")&&e[f.userid]==g||b("Stratcom").hasSigil(a[c],"mobile-icon")&&e[f.userid]==h?b("DOM").show(a[c]):b("DOM").hide(a[c])}});d.listen("finally",function(a){clearTimeout(i),i=b("setTimeoutAcrossTransitions")(j,6e4)});d.send()}j()}),null);
__d("MJewelLinkFetcher",["DOM","MLinkHack","$"],(function(a,b,c,d,e,f){"use strict";var g="mJewelNav";function a(a){a=b("DOM").find(b("$")(g),"div",a);if(!a)return null;a=b("DOM").find(a,"a","icon");return!a?null:b("MLinkHack").getHref(a)}e.exports={get:a}}),null);
__d("MHeadMeta",[],(function(a,b,c,d,e,f){"use strict";a={isExistsByName:function(a){return!!this.getByName(a)},getByName:function(a){if(document.querySelector)return document.querySelector('head meta[name="'+a+'"]');var b=document.head||document.getElementsByTagName("head")[0];if(!b)return null;b=b.getElementsByTagName("meta");for(var c=0;c<b.length;c++){var d=b[c],e=d.getAttribute("name");if(e===a)return d}return null}};e.exports=a}),null);
__d("MBrowserTheme",["MHeadMeta"],(function(a,b,c,d,e,f){"use strict";var g=null,h=!1,i=null;function j(){if(g)return g;g=b("MHeadMeta").getByName("theme-color");return g}a={set:function(a){var b=j();b&&(i===null&&!h&&(i=b.getAttribute("content")),i!==null&&(b.setAttribute("content",a),h=!0))},restore:function(){if(!h)return;var a=j();if(!a)return;i!==null&&(a.setAttribute("content",i),h=!1)}};e.exports=a}),null);
__d("MPhotoViewportTracking",["Banzai","DOM","FBJSON","MViewportTracking","StratcomManager"],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.init=function(a){b("StratcomManager").enableDispatch(document,"scroll"),new c().init(a)};var d=c.prototype;d.getDataFromConfig=function(a){this.relaxedMinSize=!0};d.__getStreamRoot=function(){this.$MPhotoViewportTracking1||(this.$MPhotoViewportTracking1=document.getElementById("root"));return this.$MPhotoViewportTracking1};d.getAllStories=function(){return b("DOM").scry(this.__getStreamRoot(),"div","photo-stage")};d.getStoryID=function(a){var c=a.getAttribute("data-store");if(typeof c==="string"&&c.length>0){c=b("FBJSON").parse(c);if("object_id"in c)return""+c.object_id}return a.getAttribute("id")};d.getTimeout=function(){return 250};d.getDataToLog=function(a){a=this.getStoryID(a);return{photo_id:a}};d.getTimetrackingDataToLog=function(b){var c=a.prototype.getTimetrackingDataToLog.call(this,b);b=this.getStoryID(b.story);return babelHelpers["extends"]({},c,{photo_id:b})};d.sendDataToLog=function(a){b("Banzai").post("mphotos_vpv_tracking",a)};return c}(b("MViewportTracking"));e.exports=a}),null);
__d("MMessagesThreadRowID",[],(function(a,b,c,d,e,f){"use strict";var g="other_user_fbid_",h="thread_fbid_";function a(a,b,c){return a+(b?g+b:h+String(c))}e.exports={getThreadRowID:a}}),null);
__d("MFullSizeLink",["EventListener","gkx","goURI"],(function(a,b,c,d,e,f){"use strict";var g="data-full-size-href";a={registerFullSizePhotoLink:function(a){a=a.querySelector("["+g+"]");if(a){var c=a.getAttribute(g);c&&b("EventListener").listen(a,"click",function(){b("gkx")("676816")&&b("goURI")(c)})}}};e.exports=a}),null);
__d("MInputFocus",["DOM","MViewport","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){a={scrollTo:function(a,c){b("setTimeoutAcrossTransitions")(function(){b("DOM").hide(a),b("MViewport").scrollTo(0,c),b("DOM").show(a),a.setSelectionRange(a.selectionEnd,a.selectionEnd)},0)}};e.exports=a}),null);
__d("MSinglePhotoDarkView",["cx","CSS","Event","MBrowserTheme","MViewport","destroyOnUnload"],(function(a,b,c,d,e,f,g){a={init:function(){b("MViewport").toggleHeader(!1);var a=document.getElementById("MChromeHeader");a&&b("CSS").addClass(a,"_8ih-");b("MBrowserTheme").set("black");b("destroyOnUnload")(function(){b("MViewport").toggleHeader(!0),a&&b("CSS").removeClass(a,"_8ih-"),b("MBrowserTheme").restore()})},closeButtonEventListener:function(a){var c=this,d=b("Event").listen(a,"click",function(){c.navBack()});b("destroyOnUnload")(function(){d.remove()})},navBack:function(){if(history.length<=1){window.close();return}history.go(-1)}};e.exports=a}),null);
__d("prefetchImage",[],(function(a,b,c,d,e,f){function a(a,b){var c=!0,d=new Image();d.onload=function(){c=!1,b&&b()};d.src=a;return{cancel:function(){if(!c)return;c=!1;d.onload=null;d.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}}}e.exports=a}),null);
__d("MPhotoStage",["cx","CSS","DOM","MInputFocus","MJSEnvironment","MLegacyDataStore","MRequest","MSinglePhotoDarkView","MURI","MViewport","Stratcom","Vector","prefetchImage","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=!1,i="photo-stage",j="photo-image",k="facebox",l="new-tag-placeholder",m="photos-input-tag",n="photo-tag-loading",o="popup-nub",p="tokenizer-input",q="transfer-focus-container",r=2e3,s=200,t=null,u=null,v=null,w=null,x=!1;function y(a,c,d){var e=0,f=b("MViewport").getUseableWidth();d>f?e=d-f:c<0&&(e=c);return e===0?a:new(b("Vector"))(a.x-e,a.y)}function z(a){if(!a)return;b("CSS").conditionClass(a,"_57-n",!!v);v?(clearTimeout(v),v=null):v=b("setTimeoutAcrossTransitions")(function(){z(a)},r)}function A(){t=null;while(w.length)w.pop().remove();h=!1;v&&(clearTimeout(v),v=null)}function B(a){var c,d=(c=b("Vector")).getPos(a);a=c.getDim(a);var e=c.getPos(t);c=new c(d.x+a.x/2,d.y+a.x-e.y);d=b("DOM").find(t,"*",n);c.setPos(d);b("DOM").show(d)}function C(a,c,d){var e=new(b("MURI"))(a.write_tag_uri);e.addQueryData("id",a.owner_id);e.addQueryData("facebox_id",c.facebox_id);e.addQueryData("replace_id",l);e.addQueryData("sd_source",a.source);e.addQueryData("sd_set",a.set);a={};a["ids["+d+"]"]=d;a["x["+d+"]"]=c.facebox_center.x;a["y["+d+"]"]=c.facebox_center.y;d=new(b("MRequest"))(e.normalize().toString()).addData(a);return d}function D(a,c){var d;u=a;var e=b("DOM").find(t,"*",m),f=(d=b("Vector")).getPos(t),g=d.getPos(a);a=d.getDim(a);d=new d(g.x+a.x/2,g.y+a.y-f.y);a=y(d,d.x-s/2,d.x+s/2);f=b("DOM").find(e,"*",o);f.style.left=d.x-a.x+"px";f=b("MLegacyDataStore").get(u);f.suggestions&&(c.tokenizer.updateSuggestionsIds&&c.tokenizer.updateSuggestionsIds(f.suggestions));a.setPos(e);b("DOM").show(e);d=b("DOM").find(e,"*",p);d.focus();b("MInputFocus").scrollTo(d,g.y);v&&(clearTimeout(v),v=null)}function E(a){var c=b("DOM").find(t,"*",m);if(u){var d=b("MLegacyDataStore").get(u),e=b("MLegacyDataStore").get(t);e=C(e,d,a);B(u);e.listen("finally",function(){x&&b("MSinglePhotoDarkView").navBack();var a=b("DOM").find(t,"*",n);b("DOM").hide(a)});e.send();b("DOM").hide(u);b("DOM").hide(c);b("DOM").find(c,"*",p).blur();u=null}v=b("setTimeoutAcrossTransitions")(function(){z(t)},r)}a=function(a,c,d){if(h)return;x=d;t=a;h=!0;d="touchend";b("MJSEnvironment").IS_ANDROID&&(d="click");if(c&&c.use_faceboxes){w=[(a=b("Stratcom")).listen(d,i,function(a){if(u){var c=b("DOM").find(t,"*",m);b("DOM").find(c,"*",p).blur();b("DOM").hide(c);u=null;a.kill()}else z(a.getNode(i))}),a.listen(d,k,function(a){var c=b("DOM").find(t,"*",q),d=a.getNode(k);x?u=d:D(d,c);a.kill()}),a.listen(d,q,function(a){var c=a.getNode(q);c=b("DOM").find(c,"*",p);c.focus();u&&b("MInputFocus").scrollTo(c,b("Vector").getPos(u).y);a.kill()}),a.listen("Tokenizer-addedtoken",null,function(a){E(a.getData().rel)}),a.listen("close-on-tag",null,function(a){E(a.getData())})]}else w=[b("Stratcom").listen("touchend",i,function(a){z(a.getNode(i))})];w.push(b("Stratcom").listen("m:page:unload",null,A));c=b("DOM").scry(t,"*",j);c.length>0&&b("MLegacyDataStore").get(c[0]).imgsrc?b("prefetchImage")(b("MLegacyDataStore").get(c[0]).imgsrc,function(){return z(t)}):z(t)};f.main=a}),null);
__d("MPhotoStagePrefetch",["MLinkHack","MPageCache","MPageController","MPageFetcher"],(function(a,b,c,d,e,f){"use strict";a={prefetch:function(a){a=b("MLinkHack").getHref(a);if(a==null)return;!b("MPageCache").isPageCached(a,b("MPageController").EXPERIMENTAL_USER_EXPIRE_MS)&&b("MPageFetcher").getPrefetchState(a)===null&&b("MPageFetcher").prefetch(a)}};e.exports=a}),null);
__d("MTouchAfro",["csx","cx","fbt","CSS","DOM","MHome","MLegacyDataStore","MModalDialog","MPageCache","MPageController","MRequest","MXUIDiv.react","Parent","React","ReactDOM","Stratcom","$","ge","gkx","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g,h,i){var j=b("React"),k=null,l=null,m=null,n={renderNFXReport:function(a,c){b("setTimeoutAcrossTransitions")(function(){b("CSS").hide(a),n.openDialog(c)},500)},initUndoHide:function(){if(k!==null)return;k=b("Stratcom").listen("click","afro-undo-hide",function(a){a=a.getNode("undo-content");var c=b("MLegacyDataStore").get(a).storyDomID;b("DOM").hide(a);b("DOM").show(b("$")(c))});b("Stratcom").listen("m:page:unload",null,function(){k.remove(),b("Stratcom").removeCurrentListener()})},hideOriginalContent:function(a){b("DOM").hide(b("$")(a));if(b("gkx")("1262495")){a=b("MPageController").getRenderedPath();a!==null&&b("MHome").isHome(a)&&b("MPageCache").removeCachedPage(a)}},initDoneListener:function(a,c){if(l!==null)return;l=b("Stratcom").listen("click","nfx-dialog-done",function(d){if(a){d=b("$")(a);if(d){var e=b("MLegacyDataStore").get(d).enhancedAfro;e&&b("CSS").addClass(d,"_2gft")}b("ReactDOM").render(j.jsx(b("MXUIDiv.react"),{padding:"large",fontshade:"medium",fontweight:"bold",children:i._("C\u1ea3m \u01a1n b\u1ea1n \u0111\u00e3 b\u00e1o c\u00e1o.")}),b("$")(a));if(c){e=b("ge")(c);e&&(b("DOM").remove(e),b("CSS").removeClass(b("Parent").bySelector(b("$")(a),"._2b01"),"_2b01"))}}b("MModalDialog").close()});b("Stratcom").listen("m:page:unload",null,function(){l.remove(),b("Stratcom").removeCurrentListener()})},showConfirmationPopup:function(a,c){a=confirm(a);if(a){a=new(b("MRequest"))(c);a.send()}},showInlineConfirmation:function(a,c){a=b("$")(a);b("DOM").hide(a);b("DOM").insertAfter(a,c);a=b("DOM").scry(c,"a","touchable");a[0]&&a[0].focus()},redirect:function(a,c){if(!c)window.location=a;else{c=new(b("MRequest"))(a);c.send()}},redirectOnClick:function(a,c){b("Stratcom").listen("click",c,function(b){window.location=a})},openDialog:function(a){b("MModalDialog").open(a)},openDialogOnClick:function(a,c){var d=b("Stratcom").listen("click",c,function(c){b("MModalDialog").open(a)});b("Stratcom").listen("m:page:unload",null,function(){d.remove(),b("Stratcom").removeCurrentListener()})},initActionsTakenStore:function(){if(m!==null)return;m=new Set();var a=b("Stratcom").listen("m-nfx-action-taken",null,function(a){return m.add(a.getData())});b("Stratcom").listen("m:page:unload",null,function(){a.remove(),b("Stratcom").removeCurrentListener()})},clearActionsTakenStore:function(){m=new Set()},invokeActionTaken:function(a){b("Stratcom").invoke("m-nfx-action-taken",null,a)},checkActionAgainstStore:function(a){var c=b("MLegacyDataStore").get(a);a=!1;m.forEach(function(b){b.action===c.action&&b.label===c.label&&(a=!0)});return a},addCancelButtonListener:function(){var a=b("$")("modalDialog");b("DOM").listen(a,"click","dialog-cancel-button-alt",function(a){a.kill();b("MModalDialog").close();return})},dialogLoadConfirmationScreenOnClick:function(a){b("DOM").listen(a,"click",null,function(a){a.kill();b("MModalDialog").close();return})},logReportAdLinkClick:function(a,c){var d=b("DOM").listen(a,"click",null,function(){new(b("MRequest"))(c).send()});b("Stratcom").listen("m:page:unload",null,function(){d.remove(),b("Stratcom").removeCurrentListener()})},setupWildeDoneButton:function(){window.addEventListener("fbActionButtonClick",function(){return window.__fbNative.close()})}};e.exports=n}),null);
__d("FRXFunnelLoggerUtil",["CurrentUser"],(function(a,b,c,d,e,f){a={getSessionKey:function(a){var c=b("CurrentUser").getAccountID();if(a==null)return c;else return c+"#"+a}};e.exports=a}),null);
__d("MFRXWebFunnelLogger",["Event","FRXFunnelLoggerUtil","Stratcom","WebFunnelLogger"],(function(a,b,c,d,e,f){var g={startcomListeners:[],get:function(a,c){c=b("FRXFunnelLoggerUtil").getSessionKey(c);return new(b("WebFunnelLogger"))("FRXMSiteFunnelDefinition").setAction(a).setSessionKey(c)},createFunnelTagList:function(a,b,c){return["entry_point: "+a,"is_frx: true","object_id: "+b,"surface: "+c]},attachClickLogging:function(a,c,d,e,f){b("Event").listen(a,"click",function(){var a=g._getLoggerForXHP(c,d,e,f);a.log()})},removeStratcomListeners:function(){for(var a=g.startcomListeners,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.remove()}g.startcomListeners=[]},attachStratcomClickLogging:function(a,c,d,e,f){a=b("Stratcom").listen("click",a,function(a){a=g._getLoggerForXHP(c,d,e,f);a.log();b("Stratcom").removeCurrentListener()});g.startcomListeners.push(a)},logEvent:function(a,b,c,d){a=g._getLoggerForXHP(a,b,c,d);a.log()},_getLoggerForXHP:function(a,b,c,d){a=g.get(a,b);if(c!=null){b=Object.entries(c);for(var c=0;c<b.length;c++){var e=b[c],f=e[0];e=e[1];a.addActionPayload(f,e)}}d!=null&&a.setFunnelTags(d);return a}};e.exports=g}),null);
__d("MRapidReportingHelper",["DOM","MModalDialog","Stratcom"],(function(a,b,c,d,e,f){a={initDoneButtonDialog:function(){b("Stratcom").listen("click","rr_done_sigil",function(){b("MModalDialog").close({canceled:!0,goBack:!1})})},initMoreLink:function(){b("Stratcom").listen("click","more-link-photo-viewer",function(){b("Stratcom").removeCurrentListener()})},initDoneButtonMLite:function(){var a=document.getElementById("rapid_report_confirm_done_button");a!==null&&b("DOM").show(a);b("Stratcom").listen("click","rr_done_sigil_mlite",function(){window.mliteFrxJSInterface!=null&&window.mliteFrxJSInterface.onMLiteFRXFlowNav!=null?window.mliteFrxJSInterface.onMLiteFRXFlowNav("frx_flow_close"):window.webkit!=null&&window.webkit.messageHandlers!=null&&window.webkit.messageHandlers.mliteFrxMessageHandler!=null&&window.webkit.messageHandlers.mliteFrxMessageHandler.postMessage("frx_flow_close")})},startFlytrap:function(){window.mliteFrxJSInterface!=null&&window.mliteFrxJSInterface.onMLiteFRXFlowNav!=null&&window.mliteFrxJSInterface.onMLiteFRXFlowNav("flytrap_flow_start")}};e.exports=a}),null);
__d("MImagePreloader",[],(function(a,b,c,d,e,f){function a(a){for(var b=0;b<a.length;b++){var c=new Image();c.src=a[b]}}f.init=a}),null);
__d("MAsyncThrobber",["DOM","MLoadingIndicator","Stratcom","destroyOnUnload"],(function(a,b,c,d,e,f){var g="async-throbber";a=function(){"use strict";function a(a){this.$1=b("MLoadingIndicator").init(a);if(!this.$1)return;this.$2=[b("Stratcom").listen("m:ajax:saving:start",null,this.$3.bind(this)),b("Stratcom").listen("m:ajax:saving:complete",null,this.$4.bind(this))];b("destroyOnUnload")(this.$5.bind(this))}var c=a.prototype;c.$3=function(a){a=a&&a.getData();a&&b("DOM").scry(a,"*",g)&&this.$1.willStartAnimation()};c.$4=function(a){a=a&&a.getData();a&&b("DOM").scry(a,"*",g)&&this.$1.willPauseAnimation()};c.$5=function(){while(this.$2&&this.$2.length)this.$2.pop().remove();this.$1=null};return a}();e.exports=a}),null);
__d("QE2Logger",["Banzai"],(function(a,b,c,d,e,f){"use strict";var g="qe2_log_exposure",h={},i={logExposureForUser:function(a,b){b=(b=b)!=null?b:"";i.__logExposure(a,b,9)},logExposureForEmail:function(a,b){i.__logExposure(a,b,3)},logExposureForDatr:function(a){i.__logExposure(a,"",5)},logExposureForOculusLoggedOut:function(a){i.__logExposure(a,"",31)},logExposureForPage:function(a,b){i.__logExposure(a,b,7)},logExposureForBusiness:function(a,b){i.__logExposure(a,b,17)},logExposureForGroup:function(a,b){i.__logExposure(a,b,25)},logExposureForPhoneNumber:function(a,b){i.__logExposure(a,b,8)},logExposureForScimCompanyID:function(a,b){i.__logExposure(a,b,22)},logExposureForAnalyticsEntityID:function(a,b){i.__logExposure(a,b,27)},logExposureForAdAccountID:function(a,b){i.__logExposure(a,b,0)},logExposure:function(a,b,c){i.__logExposure(a,b,c)},__logExposure:function(a,c,d){var e=a+"|"+c;if(h[e])return;a={universeName:a,unitID:c,unitType:d};b("Banzai").post(g,a);h[e]=!0}};e.exports=i}),null);
__d("MCommentActionsFlyout",["cx","Bootloader","CSS","DOM","MActionBubbleHelper","MFRXWebFunnelLogger","MLegacyDataStore","MModalDialog","MParent","MRequest","QE2Logger","Stratcom","URI","qex"],(function(a,b,c,d,e,f,g){var h,i="ban_user_from_page_comment_sigil",j="editCommentSigil",k="editHistoryCommentSigil",l="deleteCommentSigil",m="deleteCommentAndBlockAuthorSigil",n="deleteCommentAndRemoveAuthorSigil",o="hideCommentSigil",p="muteMemberSigil",q="reportCommentSigil",r="commentFlyoutSigil",s="removeTagSigil",t=!1;function u(a,c,d){a=b("DOM").find(a,"*",c);b("MActionBubbleHelper").toggleActionBubbleItem(a,d,"MCommentActionsFlyout",c)}function v(a,c,d){var e=b("DOM").find(a,"*",c),f=!!d.groupMuteCommenterInfo;b("MActionBubbleHelper").toggleActionBubbleItem(e,f,"MCommentActionsFlyout",c);if(f&&c===p){e=b("DOM").scry(a,"*",c)[0];b("CSS").conditionClass(e,"_4ob2",!d.groupMuteCommenterInfo.is_commenter_muted)}}function w(a){a=b("MParent").bySigil(a,"comment-metadata");return a}function x(a,c){c=b("MLegacyDataStore").get(c);a.addQueryData("_ft_",c.linkdata)}function y(a,c){x(c,a);a=new(b("MRequest"))(c);a.send()}function z(a,c,d){b("MModalDialog").open(c,d)}function A(){var a=w(this.getCausalElement()),c=this.getRoot();if(a==null)return;a=b("MLegacyDataStore").get(a);u(c,j,!!a.editCommentURI);u(c,k,!!a.editHistoryCommentURI);u(c,l,!!a.deleteCommentURI);u(c,m,!!a.deleteCommentAndBlockAuthorURI);u(c,n,!!a.deleteCommentAndRemoveAuthorURI);u(c,o,!!a.hideCommentURI);v(c,p,a);u(c,q,!!a.reportCommentURI);u(c,i,!!a.banUserFromPageURIParams&&!t);u(c,s,!!a.removeTagURI&&B())}function B(){if(b("qex")._("1015319")===!0){var a=b("qex")._("1015313")===!0;b("QE2Logger").logExposureForUser("obe_frx_experiments");return a}return!1}function C(a){var c=b("MLegacyDataStore").get(a.getNode(r)),d=w(c.layer.getCausalElement());if(d==null)return;var e=b("MLegacyDataStore").get(d);if(a.getNode(j))y(d,new(h||(h=b("URI")))(e.editCommentURI));else if(a.getNode(k))y(d,new(h||(h=b("URI")))(e.editHistoryCommentURI));else if(a.getNode(l))y(d,new(h||(h=b("URI")))(e.deleteCommentURI));else if(a.getNode(m))y(d,new(h||(h=b("URI")))(e.deleteCommentAndBlockAuthorURI));else if(a.getNode(n))y(d,new(h||(h=b("URI")))(e.deleteCommentAndRemoveAuthorURI));else if(a.getNode(s))y(d,new(h||(h=b("URI")))(e.removeTagURI));else if(a.getNode(o))y(d,new(h||(h=b("URI")))(e.hideCommentURI));else if(a.getNode(p))y(d,new(h||(h=b("URI")))(e.groupMuteCommenterInfo.URI));else if(a.getNode(q)){var f=new(h||(h=b("URI")))(e.reportCommentURI);e.commentID!=null&&b("MFRXWebFunnelLogger").get("begin_frx_flow",e.commentID).setFunnelTags(b("MFRXWebFunnelLogger").createFunnelTagList("comment",e.commentID,"permalink")).log();e.reportIsModalDialog?z(d,f):y(d,f)}else a.getNode(i)&&(e.banUserFromPageURIParams&&b("Bootloader").loadModules(["MPagesBanUserUtils"],function(a){a.banUserFromPage(e.banUserFromPageURIParams.pageID,e.banUserFromPageURIParams.userID,e.banUserFromPageURIParams.userName,function(){t=!0})},"MCommentActionsFlyout"));c.layer.hide();a.kill()}var D,E;a=function(a){if(D)return;D=a;var c=a.getRoot();b("Stratcom").addSigil(c,r);E=[b("Stratcom").listen("m:page:unload",null,function(){while(E.length>0)E.pop().remove();D=null}),a.addListener("beforeshow",A,a),b("DOM").listen(c,"click",null,C)]};e.exports={registerFlyout:a}}),null);
__d("XLiveCommentRenderController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/mobile/live_comment/render/",{})}),null);
__d("MUFILiveComments",["cx","Bootloader","DOM","MLiveData","MParent","MRequest","Stratcom","SubscriptionsHandler","XLiveCommentRenderController"],(function(a,b,c,d,e,f,g){"use strict";var h="feed-ufi-comments",i="m-ufi";a=function(){function a(a,c){this.rootElement=a,this.activityElement=b("DOM").create("div",{className:"_623b"}),this.rootElement.parentNode&&this.rootElement.parentNode.insertBefore(this.activityElement,this.rootElement.nextSibling),this.fetchedComments={},this.feedbackTargetID=c,this.feedbackTarget=b("MLiveData").get(this.feedbackTargetID),this.liveTypersCount=null,this.handler=new(b("SubscriptionsHandler"))(),this.handler.addSubscriptions(b("Stratcom").listen("m:ufi:live-comments:new-comment",null,this.onNewComment.bind(this)),b("Stratcom").listen("m:page:unload",null,this.onUnload.bind(this))),this.getIsCommentFlyout()||this.initTypingIndicatorSubscription()}var c=a.prototype;c.initTypingIndicatorSubscription=function(){var a=this;b("Bootloader").loadModules(["MUFICommentTypingSubscriptionController"],function(b){b=new b(a.feedbackTargetID,function(b){a.liveTypersCount=b,a.updateActivityUI()});b.didSubscribe()&&a.handler.addSubscriptions(b)},"MUFILiveComments")};c.onNewComment=function(a){var c=this;a=a.getData();var d=a.feedbackTargetID,e=a.commentToken;if(d!==this.feedbackTargetID)return;var f=this.feedbackTarget.getData();if(!this.fetchedComments[e]){a=b("XLiveCommentRenderController").getURIBuilder().getURI();a=new(b("MRequest"))(a);a.setData({comment_token:e,dom_append_id:this.rootElement.id});a.listen("postprocess",function(){var a=f.comments||[];a.push(e);b("MLiveData").update(d,{comments:a});c.updateActivityUI(f.logging_interaction_key)});a.send();this.fetchedComments[e]=!0}};c.getIsCommentFlyout=function(){return!!b("MParent").bySigil(this.rootElement,h)};c.getCommentElement=function(a){a=a&&a.split("_")[1];return a?document.getElementById(a):null};c.updateActivityUI=function(a){b("Bootloader").loadModules(["MReactComponentRenderer","MUFILiveCommentActivity.react"],function(c,d){var e=this.feedbackTarget.getData();c(d,this.activityElement,{comments:e.comments||[],feedbackTargetID:this.feedbackTargetID,isAnyLiveTyping:this.liveTypersCount&&this.liveTypersCount>0,disablePill:this.getIsCommentFlyout()});c=e.logging_interaction_key;d=c?[c]:[];a&&a!==c&&d.push(a);b("Stratcom").invoke("m:ufi:live-comments:render",null,{ufi:b("MParent").bySigil(this.rootElement,i),logKeys:d})}.bind(this),"MUFILiveComments")};c.onUnload=function(){this.handler.release(),this.liveTypersCount=null};return a}();e.exports=a}),null);
__d("MActionBubbleLayout",["cx","CSS"],(function(a,b,c,d,e,f,g){a=function(){"use strict";function a(a){this.$1=null,this.$2=a}var c=a.prototype;c.enable=function(){this.$1=this.$2.addListener("adjustDimensions",this.$3.bind(this)),this.$2.isShown()&&this.$2.updatePosition()};c.disable=function(){this.$1.remove(),this.$1=null,this.$2.isShown()&&this.$2.updatePosition()};c.$3=function(){var a=this.$2;this.$4(!0);var b=this.$2.getContentRoot();b.clientWidth>=a.getMaxWidth()&&this.$4(!1)};c.$4=function(a){var c=this.$2;c.setWidth(a?"auto":"wide");c.applyWidth();b("CSS").conditionClass(c.getRoot(),"_55i0",a)};return a}();e.exports=a}),null);
__d("onAfterDisplay",["NavigationMetrics","TimeSlice","requestIdleCallback"],(function(a,b,c,d,e,f){"use strict";var g=[],h=!1;function a(a){a=b("TimeSlice").guard(a,"onAfterDisplay invocation",{propagationType:b("TimeSlice").PropagationType.ORPHAN});h?b("requestIdleCallback")(a):g.push(a)}b("NavigationMetrics").addRetroactiveListener(b("NavigationMetrics").Events.EVENT_OCCURRED,function(a,c){["all_pagelets_displayed","e2e"].indexOf(c.event)>-1&&!h&&(h=!0,g.forEach(function(a){b("requestIdleCallback")(a)}))});e.exports=a}),null);